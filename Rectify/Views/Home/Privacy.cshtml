@model ApplicationUser

@{
    ViewData["Title"] = "Privacy";
    Layout = "_Layout";
    var id = Model.Id;
}
<head>

    <style>

        .btn-pink {
            color: #fff;
            background-color: #ff1493;
            border-color: #ff1493;
            border-radius: 0.25rem; /* Matches Bootstrap's default */
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
        }

            .btn-pink:hover {
                background-color: #e01384; /* Slightly darker pink */
                border-color: #e01384;
                color: #fff;
            }

            .btn-pink:active {
                transform: scale(0.95);
            }

        .nav-pills .btn-pink {
            border-radius: 50rem; /* pill shape */
            padding: 0.4rem 1rem;
            font-size: 0.95rem;
            background-color: #ff1493;
            color: white !important;
        }

            .nav-pills .btn-pink:hover {
                background-color: #e01384;
                color: white;
            }

        .btn-outline-pink {
            color: #ff1493;
            border: 2px solid #ff1493;
            background-color: transparent;
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
        }

            .btn-outline-pink:hover {
                background-color: #ff1493;
                color: #fff;
                border-color: #ff1493;
            }

        .qr-btn {
            display: inline-block;
            width: 30px; /* Adjust the size */
            height: 30px; /* Adjust the size */
            border: 2px solid #ff1493; /* Pink border */
            border-radius: 0.25rem; /* Rounded corners like other buttons */
            transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
            text-align: center;
        }

            .qr-btn:hover {
                background-color: #fff; /* White background on hover */
                border-color: #ff1493; /* Pink border on hover */
            }

            .qr-btn img {
                width: 100%; /* Ensures image fits into the button */
                height: 100%; /* Ensures image fits into the button */
                object-fit: cover;
            }




    </style>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

</head>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Your Account Details</h2>

    <div class="d-flex gap-2">
        <a class="btn btn-pink" aria-current="page" href="#">Tickets</a>
        <a class="btn btn-outline-pink" href="@Url.Action("Edit", "Account")">Edit Details</a>
        <a class="btn btn-outline-pink" href="@Url.Action("Report", "Account")">Report</a>
        <button class="btn btn-outline-pink" id="qr-btn" data-bs-toggle="modal" data-bs-target="#qrModal"
                onclick="loadQrCode('@id')">
            <!-- Pass UserId here -->
            <i class="bi bi-qr-code"></i> QR Code
        </button>


    </div>
</div>



<table class="table table-bordered table-striped mt-3">
    <tbody>
        <tr>
            <th>Full Name</th>
            <td>@Model.FullName</td>
        </tr>
        <tr>
            <th>Company Name</th>
            <td>@Model.CompanyName</td>
        </tr>
        <tr>
            <th>Email</th>
            <td>@Model.Email</td>
        </tr>
        <tr>
            <th>Phone Number</th>
            <td>@Model.PhoneNumber</td>
        </tr>
        <tr>
            <th>City</th>
            <td>@Model.City</td>
        </tr>
        <tr>
            <th>Branch Address</th>
            <td>@Model.BranchAddress</td>
        </tr>
        <tr>
            <th>Preferred Contact</th>
            <td>@Model.PreferredContact</td>
        </tr>
        <tr>
            <th>Reports</th>
            <td>@(Model.Reports == true ? "Yes" : "No")</td>
        </tr>
        <tr>
            <th>Owner Image</th>
            <td>
                @if (Model.OwnerImage != null)
                {
                    <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.OwnerImage)" alt="Owner Image" style="max-height: 150px;" />
                }
                else
                {
                    <span>No image provided</span>
                }
            </td>
        </tr>
        <tr>
            <th>Logo Image</th>
            <td>
                @if (Model.LogoImage != null)
                {
                    <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.LogoImage)" alt="Logo Image" style="max-height: 150px;" />
                }
                else
                {
                    <span>No logo provided</span>
                }
            </td>
        </tr>
    </tbody>
</table>

<!-- QR Code Modal -->
<div class="modal fade" id="qrModal" tabindex="-1" aria-labelledby="qrModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-header">
                <h5 class="modal-title" id="qrModalLabel">Scan to Give Feedback</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img id="qrCodeImage" src="" alt="QR Code" class="img-fluid" />
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-pink" onclick="window.print()">Print QR Code</button>
            </div>
        </div>
    </div>
</div>



<script>
    // Generate the QR code dynamically with pink color
    window.onload = function() {
        var qrContainer = document.getElementById("qr-code-container");
        QRCode.toDataURL('@Url.Action("QrCode", "Account")', {
            width: 100,  // Size of QR code
            height: 100,
            color: {
                dark: '#ff1493',  // Pink color for the QR code
                light: '#ffffff'  // White background
            }
        }, function (err, url) {
            if (err) console.error(err);
            qrContainer.innerHTML = `<img src="${url}" alt="QR Code" style="width:100%; height:100%;">`;
        });
    }

    function loadQrCode(userId) {
            const img = document.getElementById("qrCodeImage");
            img.src = `/Home/GenerateQrCode?userId=${userId}`;
        }
</script>